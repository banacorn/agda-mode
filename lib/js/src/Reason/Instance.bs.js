// Generated by BUCKLESCRIPT VERSION 4.0.18, PLEASE EDIT WITH CARE
'use strict';

var Block = require("bs-platform/lib/js/block.js");
var Curry = require("bs-platform/lib/js/curry.js");
var View$AgdaMode = require("./View.bs.js");
var Async$AgdaMode = require("./Util/Async.bs.js");
var Event$AgdaMode = require("./Util/Event.bs.js");
var Editors$AgdaMode = require("./Editors.bs.js");
var Instance__Handler$AgdaMode = require("./Instance/Instance__Handler.bs.js");

function activate(instance) {
  return View$AgdaMode.Handles[/* activate */2](instance[/* view */2]);
}

function deactivate(instance) {
  return View$AgdaMode.Handles[/* deactivate */3](instance[/* view */2]);
}

function destroy(instance) {
  return View$AgdaMode.Handles[/* destroy */4](instance[/* view */2]);
}

function make(textEditor) {
  atom.views.getView(textEditor).classList.add("agda");
  var editors = Editors$AgdaMode.make(textEditor);
  var instance = /* record */Block.record([
      "loaded",
      "editors",
      "view",
      "highlightings",
      "goals",
      "connection",
      "dispatch",
      "handleResponses"
    ], [
      false,
      editors,
      View$AgdaMode.initialize(editors),
      [],
      [],
      undefined,
      Instance__Handler$AgdaMode.dispatch,
      Instance__Handler$AgdaMode.handleResponses
    ]);
  var destructor0 = Event$AgdaMode.onOk((function (prim) {
            console.log(prim);
            return /* () */0;
          }))(instance[/* view */2][/* onInquireConnection */6]);
  var destructor1 = Event$AgdaMode.onOk((function (ev) {
            switch (ev.tag | 0) {
              case 0 : 
                  Instance__Handler$AgdaMode.dispatch(/* Jump */Block.variant("Jump", 9, [ev[0]]), instance);
                  return /* () */0;
              case 1 : 
              case 2 : 
                  return /* () */0;
              
            }
          }))(instance[/* view */2][/* onMouseEvent */15]);
  Async$AgdaMode.finalOk((function (param) {
          Curry._1(destructor0, /* () */0);
          return Curry._1(destructor1, /* () */0);
        }), Event$AgdaMode.once(instance[/* view */2][/* destroy */12]));
  return instance;
}

function dispatchUndo(_instance) {
  console.log("Undo");
  return /* () */0;
}

var Event = 0;

var Goals = 0;

var Highlightings = 0;

var Connections = 0;

var TextEditors = 0;

var Handler = 0;

var handleCommandError = Instance__Handler$AgdaMode.handleCommandError;

var dispatch = Instance__Handler$AgdaMode.dispatch;

exports.Event = Event;
exports.Goals = Goals;
exports.Highlightings = Highlightings;
exports.Connections = Connections;
exports.TextEditors = TextEditors;
exports.Handler = Handler;
exports.handleCommandError = handleCommandError;
exports.dispatch = dispatch;
exports.activate = activate;
exports.deactivate = deactivate;
exports.destroy = destroy;
exports.make = make;
exports.dispatchUndo = dispatchUndo;
/* View-AgdaMode Not a pure module */
