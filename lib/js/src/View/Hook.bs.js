// Generated by BUCKLESCRIPT VERSION 5.0.3, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("bs-platform/lib/js/curry.js");
var React = require("react");
var Rebase = require("@glennsl/rebase/lib/js/src/Rebase.bs.js");

function useAtomListener(listener) {
  React.useEffect((function () {
          var destructor = Curry._1(listener, /* () */0);
          return (function (param) {
                    destructor.dispose();
                    return /* () */0;
                  });
        }));
  return /* () */0;
}

function useAtomListenerWhen(listener, shouldListen) {
  var match = React.useState((function () {
          return undefined;
        }));
  var setDestructor = match[1];
  var destructor = match[0];
  React.useEffect((function () {
          if (shouldListen) {
            var destructor$1 = Curry._1(listener, /* () */0);
            Curry._1(setDestructor, (function (param) {
                    return (function (param) {
                              destructor$1.dispose();
                              return /* () */0;
                            });
                  }));
          } else {
            Rebase.$$Option[/* forEach */8]((function (f) {
                    return Curry._1(f, /* () */0);
                  }), destructor);
          }
          return destructor;
        }), /* array */[shouldListen]);
  return /* () */0;
}

exports.useAtomListener = useAtomListener;
exports.useAtomListenerWhen = useAtomListenerWhen;
/* react Not a pure module */
