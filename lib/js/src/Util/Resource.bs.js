// Generated by BUCKLESCRIPT, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("bs-platform/lib/js/curry.js");
var $$Promise = require("reason-promise/lib/js/src/js/promise.js");
var Belt_List = require("bs-platform/lib/js/belt_List.js");
var Caml_option = require("bs-platform/lib/js/caml_option.js");

function make(param) {
  var resource = {
    contents: undefined
  };
  var queue = {
    contents: /* [] */0
  };
  var acquire = function (param) {
    var x = resource.contents;
    if (x !== undefined) {
      return $$Promise.resolved(Caml_option.valFromOption(x));
    }
    var match = $$Promise.pending(undefined);
    queue.contents = {
      hd: match[1],
      tl: queue.contents
    };
    return match[0];
  };
  var supply = function (x) {
    resource.contents = Caml_option.some(x);
    return Belt_List.forEach(queue.contents, (function (resolve) {
                  return Curry._1(resolve, x);
                }));
  };
  return {
          acquire: acquire,
          supply: supply
        };
}

exports.make = make;
/* Promise Not a pure module */
